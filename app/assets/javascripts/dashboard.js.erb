
get_events ()



function get_events(){
	$.ajax({
	  type:'GET', 
	  url: "/log_events", 
	  mimeType:"multipart/form-data",
	  contentType: false,
	  cache: true,
	  processData:false,
	  dataType: "text",
	  success: function(data){
	  	var data = jQuery.parseJSON(data);
	  	console.log(data)
	  	$("#events_table tbody").empty()
	  	$.each(data['log_events'], function(key, val){
	  		$("#events_table tbody").append(
	  			'<tr>\
	  			<td>'+val.sign_in_time+'</td>\
	  			<td>'+val.sign_out_time+'</td>\
	  			<td>'+val.updated_at+'</td>\
	  			<td><button onclick="delete_event('+val.id+')">delete</button></td>\
	  			</tr>'
	  		)
	  	})

	  	if (data['active_event'] == null){
	  		$('#start_btn').show()
	  		$('#stop_btn').hide()
	  	} else {
	  		console.log(data['active_event'].id)
	  		$('#start_btn').hide()
	  		$('#stop_btn').attr('data-eventid', data['active_event'].id).show()
	  	}

	  }
	})
}



function start_event (){
	$.ajax({
	  type:'POST', 
	  url: "/log_events", 
	  mimeType:"multipart/form-data",
	  contentType: false,
	  cache: true,
	  processData:false,
	  dataType: "text",
	  success: function(data){
	  	get_events ()
	  }
	})
}


function stop_event (){
	$.ajax({
	  type:'PUT', 
	  url: "/log_events/"+ $('#stop_btn').attr('data-eventid') +"?update_type=stop_event", 
	  mimeType:"multipart/form-data",
	  contentType: 'application/json',
	  cache: true,
	  dataType: "text",
	  success: function(data){
	  	get_events ()
	  }
	})
}



function delete_event (id){
	$.ajax({
	  type:'DELETE', 
	  url: "/log_events/"+id, 
	  mimeType:"multipart/form-data",
	  contentType: 'application/json',
	  cache: true,
	  dataType: "text",
	  success: function(data){
	  	console.log(data)
	  	get_events ()
	  }
	})
}